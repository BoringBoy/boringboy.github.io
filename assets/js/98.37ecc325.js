(window.webpackJsonp=window.webpackJsonp||[]).push([[98],{434:function(s,a,t){"use strict";t.r(a);var e=t(7),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"磁盘空间管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#磁盘空间管理"}},[s._v("#")]),s._v(" 磁盘空间管理")]),s._v(" "),a("h3",{attrs:{id:"磁盘扩展"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#磁盘扩展"}},[s._v("#")]),s._v(" 磁盘扩展")]),s._v(" "),a("ul",[a("li",[s._v("以VMware中的Linux为例")])]),s._v(" "),a("ol",[a("li",[s._v("关闭虚拟机")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 方式1\nshutdown -h now\n\n# 方式2\npoweroff\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[a("p",[s._v("打开VMware，虚拟机--\x3e设置，选择内存，进行调整，点击确定即可。\n"),a("img",{attrs:{src:"/images/linux/%E7%A3%81%E7%9B%98%E6%89%A9%E5%B1%9501.png",alt:"vmware设置"}})])]),s._v(" "),a("li",[a("p",[s._v("启动虚拟机，查看磁盘情况")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 查看磁盘占用(非必要)\ndf -h\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("此处由于还没将扩展的磁盘空间进行分区，所以看到的空间占用信息跟设置前比较没有变化")]),s._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[s._v("查看磁盘分区信息")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(" fdisk -l\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"/images/linux/%E7%A3%81%E7%9B%98%E6%89%A9%E5%B1%9502.png",alt:"Alt text"}})]),s._v(" "),a("p",[s._v("此处可以看到红色框选部分Disk部分信息已经发生了改变，磁盘大小包含扩展的空间了。")]),s._v(" "),a("ol",[a("li",[s._v("开始用命令对磁盘分区\n(1)执行分区命令")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("fdisk /dev/sda\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("(2)输入'p',输出已有分区信息\n"),a("img",{attrs:{src:"/images/linux/%E5%88%86%E5%8C%BA01.png",alt:"Alt text"}})]),s._v(" "),a("p",[s._v("(3) 依次输入下面的字符：")]),s._v(" "),a("ul",[a("li",[s._v("输入n回车，新增一个分区；")]),s._v(" "),a("li",[s._v("输入p回车，在打开的分区号命中中使用默认的分区号并回车（此处是3）")]),s._v(" "),a("li",[s._v("在显示的起始扇区first sector直接回车，在last sector直接回车；")]),s._v(" "),a("li",[s._v("输入p回车，查看当前分区的信息：可以看到多了一个/dev/sda3的新分区；")]),s._v(" "),a("li",[s._v("输入w回车，写入磁盘信息并保存。")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/linux/%E5%88%86%E5%8C%BA02.png",alt:"Alt text"}})]),s._v(" "),a("p",[s._v("(4) 分区完成后，重启虚拟机(必须重启，否则/dev/sda4无法格式化)")]),s._v(" "),a("p",[s._v("(5) 格式化分区")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 格式化分区为ext4文件系统\nsudo mkfs.ext4 /dev/sda4\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("(6) 对新分区进行挂载")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 为新分区创建一个挂载目录\nmkdir /ext4\n\n# 打开编辑特定文件\nsudo vim /etc/fstab\n\n# 文件末尾追加以下内容,指定要挂载的分区以及挂载点的相关信息\n# 表示/dev/sda4分区开机自动挂载在/ext4目录下，文件系统类型为ext4，使用默认挂载参数\n/dev/sda4   /ext4   ext4   defaults   0   0\n\n# 接着保存文件\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("(7) 重启系统后，检查挂载情况")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("df -h \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("输入上面命令，可看到/dev/sda4 自动挂在在了/ext4目录下")]),s._v(" "),a("h4",{attrs:{id:"知识延伸"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#知识延伸"}},[s._v("#")]),s._v(" 知识延伸")]),s._v(" "),a("ul",[a("li",[s._v("删除分区并释放空间")])]),s._v(" "),a("p",[s._v("(1)删除分区之前，请确保您已将其从系统中卸载")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 示例：卸载sda4分区\numount /dev/sda4\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("(2) 删除分区表分区")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 1. 编辑分区表\nfdisk /dev/sda\n\n# 2. 列出分区表（在提示下输入'p'），并记住分区表编号(1-4)\n# 3. 继续输入'd',回车\n# 4. 输入想要删除的分区表编号(1-4),回车\n# 5. 输入'w'进行写入保存，回车\n# 6. 输入'q'退出编辑分区表\n# 7. 检查分区是否被删除/释放\nfdisk -l\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h4",{attrs:{id:"问题-解决办法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题-解决办法"}},[s._v("#")]),s._v(" 问题&&解决办法")]),s._v(" "),a("ol",[a("li",[s._v('"If you want to create more than four partitions, you must replace a\nprimary partition with an extended partition first."')])]),s._v(" "),a("ul",[a("li",[s._v("问题分析："),a("br"),s._v("\n根据Chatgpt描述，MBR（Master Boot Record）分区表方案的限制。在 MBR 分区表中，最多可以有4个主分区，或者3个主分区和1个扩展分区.如果您已经有4个主分区，并且想创建更多的分区，您需要先将一个主分区转换为扩展分区。扩展分区可以容纳逻辑分区，从而允许您在一个扩展分区内创建更多的分区。")]),s._v(" "),a("li",[s._v("解决办法：")])]),s._v(" "),a("h3",{attrs:{id:"调整swap"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#调整swap"}},[s._v("#")]),s._v(" 调整swap")]),s._v(" "),a("ul",[a("li",[s._v("参考链接：")])]),s._v(" "),a("blockquote",[a("p",[s._v("https://blog.csdn.net/atzqtzq/article/details/124137913")])]),s._v(" "),a("h2",{attrs:{id:"系统磁盘清理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#系统磁盘清理"}},[s._v("#")]),s._v(" 系统磁盘清理")]),s._v(" "),a("h3",{attrs:{id:"磁盘占用排查"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#磁盘占用排查"}},[s._v("#")]),s._v(" 磁盘占用排查")]),s._v(" "),a("ol",[a("li",[s._v("首先确定是否是磁盘满了"),a("br"),s._v("\n命令："),a("code",[s._v("df -h")])])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("参数说明")]),s._v(" "),a("p",[s._v("-a：列出所有的文件系统，包括系统特有的/proc等文件系统")]),s._v(" "),a("p",[s._v("-k：以KB的容量显示各文件系统")]),s._v(" "),a("p",[s._v("-m：以MB的容量显示各文件系统")]),s._v(" "),a("p",[s._v("-h：以人们较易阅读的GB,MB,KB等格式自行显示")]),s._v(" "),a("p",[s._v("-H：以M=1000K替代M=1024K的进位方式")]),s._v(" "),a("p",[s._v("-T：连同该分区的文件系统名称（例如ext3）也列出")]),s._v(" "),a("p",[s._v("-i：不用硬盘容量，而以inode的数量来显示")])])]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("显示每个目录的大小"),a("br"),s._v("\n命令:"),a("code",[s._v("du -sh /*")])])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("参数说明"),a("br"),s._v("\n-a : 列出所有的文件与目录容量，因为默认仅统计目录下面的文件量而已；")]),s._v(" "),a("p",[s._v("-h : 以人们较易读的容量格式（G/M）显示；")]),s._v(" "),a("p",[s._v("-s : 列出总量，而不列出每个个别的目录占用了容量；")]),s._v(" "),a("p",[s._v("-S : 不包括子目录下的总计，与-s有点差别；")]),s._v(" "),a("p",[s._v("-k : 以KB列出容量显示；")]),s._v(" "),a("p",[s._v("-m : 以MB列出容量显示。")])])]),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[s._v("其它")])]),s._v(" "),a("ul",[a("li",[s._v("寻找当前目录，哪个文件夹占用空间最大")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("du -h --max-depth=1 \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("将文件以从大到小顺序展现")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("ls –lhS\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"常用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用"}},[s._v("#")]),s._v(" 常用")]),s._v(" "),a("ol",[a("li",[s._v("查看当前目录及其子目录的占用大小，并按占用空间大小进行排序：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("du -h --max-depth=1 | sort -hr\n# -h 参数用于以易读的方式显示文件大小\n# --max-depth=1 参数用于限制只显示第一级子文件夹的信息。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("查看指定目录及其子目录的占用大小，并按占用空间大小进行排序：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("du -h --max-depth=1 /path/to/folder | sort -hr\n\n# 将显示 /path/to/folder 及其子目录的占用大小，\n# 并按照占用空间从大到小进行排序。\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);