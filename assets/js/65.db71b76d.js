(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{400:function(s,a,n){"use strict";n.r(a);var t=n(7),e=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"常规安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常规安装"}},[s._v("#")]),s._v(" 常规安装")]),s._v(" "),a("h3",{attrs:{id:"一-创建安装用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一-创建安装用户"}},[s._v("#")]),s._v(" 一. 创建安装用户")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 步骤及其说明\n#0. 切换至root用户\nsu root\n\n#1. 创建用户组\ngroupadd dinstall \n\n#2. 创建用户并为其指定用户组和登录目录\nuseradd -g dinstall -m -d /home/dmdba -s /bin/bash dmdba\n\n#3. 更改用户密码\n#暂定密码：duxingzhe \npasswd dmdba\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("h3",{attrs:{id:"二、检查操作系统资源是否满足安装需求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、检查操作系统资源是否满足安装需求"}},[s._v("#")]),s._v(" 二、检查操作系统资源是否满足安装需求")]),s._v(" "),a("ol",[a("li",[s._v("使用命令"),a("code",[s._v("ulimit -a")]),s._v(" 查看系统各项资源配置是否满足安装需求")])]),s._v(" "),a("p",[a("strong",[s._v("重要参数说明")])]),s._v(" "),a("ul",[a("li",[s._v("data seg size")])]),s._v(" "),a("p",[s._v("建议用户设置为 1048576(即 1GB)以上或 unlimited(无限制)，此参数过小将导\n致数据库启动失败。")]),s._v(" "),a("ul",[a("li",[s._v("file size")])]),s._v(" "),a("p",[s._v("建议用户设置为 unlimited(无限制)，此参数过小将导致数据库安装或初始化失败。")]),s._v(" "),a("ul",[a("li",[s._v("open files")])]),s._v(" "),a("p",[s._v("建议用户设置为 65536 以上或 unlimited(无限制)。")]),s._v(" "),a("ul",[a("li",[s._v("virtual memory")])]),s._v(" "),a("p",[s._v("建议用户设置为 1048576(即 1GB)以上或 unlimited(无限制)，此参数过小将导\n致数据库启动失败。")]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("检查内存和存储是否满足要求")])]),s._v(" "),a("ul",[a("li",[s._v("检查内存")])]),s._v(" "),a("p",[s._v("为了保证 DM 的正确安装和运行，要尽量保证操作系统至少 1GB 的可用内存(RAM)。如果可用内存过少，可能导致DM安装或启动失败")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 命令\nfree\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[s._v("检查存储空间\nDM 完全安装需要 1GB 的存储空间，用户需要提前规划好安装目录，预留足够的\n存储空间。DM 安装程序在安装时将产生临时文件，临时文件需要 1GB 的存储空间，临时文件目录默认为/tmp。用户可以使用以下命令检查存储空间。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 命令\ndf -h 【目标安装目录】\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("注：可以通过定义环境变量的方式修改安装程序的临时目录，如：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#指定临时目录为/db_tmp\nDM_INSTALL_TMPDIR=/db_tmp\nexport DM_INSTALL_TMPDIR\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"三、设置环境变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、设置环境变量"}},[s._v("#")]),s._v(" 三、设置环境变量")]),s._v(" "),a("ol",[a("li",[s._v("对于程序运行所需的java环境有要求的情况下，可通过环境变量指定达梦程序使用的java环境,否则可忽略此步骤")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 假设机器上已经安装了jdk\nDM_JAVA_HOME=`echo $JAVA_HOME`\nexport DM_JAVA_HOME\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"四、上传dm安装包并解压"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、上传dm安装包并解压"}},[s._v("#")]),s._v(" 四、上传dm安装包并解压")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("使用ftp工具将dmxxxx.zip 上传至dmdba 用户目录中")])]),s._v(" "),a("li",[a("p",[s._v("开始解压")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 以上传目录/home/dmdba为例,命令如下\ncd /home/dmdba\nuzip dmxxxx.zip\n\n# 解压后得到 dmxxxx.iso 和dmxxxxx.txt文件\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"五、root-用户下-加载安装光驱-并赋权"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#五、root-用户下-加载安装光驱-并赋权"}},[s._v("#")]),s._v(" 五、ROOT 用户下 加载安装光驱，并赋权")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('# 1. 切换到root用户\nsu root\n\n# 2.创建目录\nmkdir /mnt/cdrom\n\n# 3. 将步骤四解压的dmxxx.iso 文件挂载 至cdrom目录\nmount /home/dmdba/dmxxxxx.iso /mnt/cdrom\n\n# 4. 移动至cdrom目录下\ncd /mnt/cdrom/\n\n# 5.更改cdrom 目录下"./DMInstall.bin" 的权限\nchmod 755 ./DMInstall.bin\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("h3",{attrs:{id:"六、开始安装数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#六、开始安装数据库"}},[s._v("#")]),s._v(" 六、开始安装数据库")]),s._v(" "),a("p",[a("strong",[s._v("注意：不推荐使用root用户进行安装，请使用步骤1创建的dmdba用户进行安装")]),s._v("\n此步骤有主要有两种安装方式，分别为图形化界面安装和命令行安装")]),s._v(" "),a("ol",[a("li",[s._v("图形化界面安装")])]),s._v(" "),a("p",[s._v("(1)进入到/mnt/cdrom 目录中；")]),s._v(" "),a("p",[s._v('(2)双击目录中的"DMInstall.bin"进行安装 或者使用 命令'),a("code",[s._v("./DMInstall.bin")]),s._v("进行安装；")]),s._v(" "),a("p",[s._v("(3)根据界面进行选择和配置")]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("命令行安装")])]),s._v(" "),a("p",[s._v("命令行安装会以对话框选择的方式呈现，用户根据提示输入相应的字符并回车即可。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#进入到/mnt/cdrom 目录中\ncd /mnt/cdrom\n\n#输入下面的命令\n./DMInstall.bin -i\n\n#选择安装语言：\n#验证key:\n....\n\n#选择安装路径，此处输入目标路径即可,默认是 $HOME/dmdbms\n#安装后，若屏幕提示“请以root用户执行命令”，则切换至root用户执行对应命令即可。\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("使用命令行安装后，还需要初始化数据库信息以及注册系统相关服务。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 初始化数据库信息(dmdba用户)\n# 本例达梦安装目录为 : /home/dmdba/dmdbms\n# 需要先进入到dm数据库安装目录下的/bin目录中\n\ncd /home/dmdba/dmdbms/bin\n\n# 执行目录下的dminit命令，并指定相关参数\n# 参数较多，请参照手册按需更改\n# 示例（其中，PATH需要指定，后面几个分别对应数据库名、实例名和端口号，它们有默认值，可不指定）\n\n./dminit PATH=/home/dmdba/dm_db_data DB_NAME=xxxx INSTANCE_NAME=xxxxx PORT_NUM=xxx\n\n# 使用dm自带的脚本文件注册服务(需在root用户下执行命令)\n# 注册服务脚本为 dm_service_installer.sh,该文件位于dm安装目录下的/script/root目录中\n# 移动到脚本所在目录\n\ncd /home/dmdba/dmdbms/script/root\n\n# 参数说明\n# -t 指定服务类型\n# -dm_ini 指定初始化配置文件，该文件位于dminit命令指定的PATH路径/数据库名 中，本例为: /home/dmdba/dm_db_data/DAMENG\n# -p 指定服务名后缀，生成的操作系统服务名为“服务脚本模板名称+服务名后缀”\n# 执行下面的命令进行注册\n\n./dm_service_installer.sh -t dmserver -dm_ini /home/dmdba/dm_db_data/DAMENG -p DMSERVER01\n\n# 当注册完成后就可使用systemctl 命令进行服务管理了\n# 即 systemctl status/start/stop/restart dmserverDMSERVER01\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br")])]),a("h2",{attrs:{id:"docker下安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker下安装"}},[s._v("#")]),s._v(" docker下安装")]),s._v(" "),a("h2",{attrs:{id:"其它说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其它说明"}},[s._v("#")]),s._v(" 其它说明")]),s._v(" "),a("ol",[a("li",[s._v("dminit虽然有很多参数，但大多数情况下默认值即是最佳的选择，所以我们在使用dminit初始化数据库时，只要指定：\n"),a("ul",[a("li",[s._v("初始数据库存放的路径：PATH")]),s._v(" "),a("li",[s._v("数据库名：DB_NAME（默认为：DAMENG）")]),s._v(" "),a("li",[s._v("实例名：INSTANCE_NAME（默认为：DMSERVER）")]),s._v(" "),a("li",[s._v("监听端口号：PORT_NUM（默认为：5236）")])])])]),s._v(" "),a("h3",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[s._v("#")]),s._v(" 参考")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("参考文件")]),s._v(" "),a("ul",[a("li",[s._v("《DM8安装手册.pdf》")]),s._v(" "),a("li",[s._v("《DM8_dminit使用手册.pdf》")]),s._v(" "),a("li",[s._v("《DM8_linux服务脚本使用手册.pdf》")])])]),s._v(" "),a("li",[a("p",[s._v("官方文档")])])]),s._v(" "),a("blockquote",[a("p",[s._v("https://eco.dameng.com/document/dm/zh-cn/faq/faq-dm-instance.html")])])])}),[],!1,null,null,null);a.default=e.exports}}]);