(window.webpackJsonp=window.webpackJsonp||[]).push([[111],{448:function(s,a,n){"use strict";n.r(a);var t=n(7),e=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"elk简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#elk简介"}},[s._v("#")]),s._v(" ELK简介")]),s._v(" "),a("p",[s._v("ELK 是ElasticSearch开源生态中提供的一套完整日志收集、分析以及展示的解决方案，是三个产品的首字母缩写，分别是ElasticSearch、Logstash 和 Kibana。")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("ElasticSearch 是一个分布式、Restful 风格的搜索和数据分析引擎。")])]),s._v(" "),a("li",[a("p",[s._v("Logstash 是服务器端数据处理管道，能够同时从多个来源采集数据，转换数据，然后将数据发送到诸如 ElasticSearch 等存储库中。")])]),s._v(" "),a("li",[a("p",[s._v("Kibana 则可以让用户在 ElasticSearch 中使用图形和图表对数据进行可视化。")])])]),s._v(" "),a("p",[s._v("搭建elk时，要保证其对应的版本好一致，否则会出现未知的错误")]),s._v(" "),a("h2",{attrs:{id:"搭建elasticsearch"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#搭建elasticsearch"}},[s._v("#")]),s._v(" 搭建ElasticSearch")]),s._v(" "),a("ol",[a("li",[s._v("下载")])]),s._v(" "),a("blockquote",[a("p",[s._v("https://www.elastic.co/cn/downloads/elasticsearch")])]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("上传并解压")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("tar -xzvf elasticsearch-xxx.tar.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("创建专属es用户")])]),s._v(" "),a("blockquote",[a("p",[s._v("root用户不能直接启动Elasticsearch，所以需要创建一个专用用户，来启动ES")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 创建用户\nuseradd user-es\n\n# 分配权限\nchown user-es:user-es -R /usr/local/elasticsearch-7.13.2\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[s._v("修改配置")])]),s._v(" "),a("ul",[a("li",[s._v("修改ES的jdk依赖")])]),s._v(" "),a("blockquote",[a("p",[s._v("es和jdk是一个强依赖的关系，所以当我们在新版本的ElasticSearch压缩包中包含有自带的jdk，但是当我们的Linux中已经安装了jdk之后，就会发现启动es的时候优先去找的是Linux中已经装好的jdk，此时如果jdk的版本不一致，就会造成jdk不能正常运行")])]),s._v(" "),a("p",[s._v("(1)进入bin目录，并编辑启动文件")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cd /usr/local/elasticsearch-7.13.2/bin\n\nvim ./elasticsearch\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("(2)添加以下代码")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('############## 添加配置解决jdk版本问题 ##############\n# 将jdk修改为es中自带jdk的配置目录\nexport JAVA_HOME=/usr/local/elasticsearch-7.13.2/jdk\nexport PATH=$JAVA_HOME/bin:$PATH\n\nif [ -x "$JAVA_HOME/bin/java" ]; then\n        JAVA="/usr/local/elasticsearch-7.13.2/jdk/bin/java"\nelse\n        JAVA=`which java`\nfi\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("ul",[a("li",[s._v("修改ES核心配置")])]),s._v(" "),a("p",[s._v("(1)编辑config目录中的yml文件")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("vim /usr/local/elasticsearch-7.13.2/config/elasticsearch.yml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("(2)修改以下配置")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('# 修改数据和日志目录\n# 数据目录位置\npath.data: /home/新用户名称/elasticsearch/data \n# 日志目录位置\npath.logs: /home/新用户名称/elasticsearch/logs \n\n#修改绑定的ip允许远程访问\n#默认只允许本机访问，修改为0.0.0.0后则可以远程访问\n# 绑定到0.0.0.0，允许任何ip来访问\nnetwork.host: 0.0.0.0 \n\n#初始化节点名称\ncluster.name: elasticsearch \nnode.name: es-node0\ncluster.initial_master_nodes: ["es-node0"]\n\n#修改端口号(根据需要)\nhttp.port: 19200\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br")])]),a("ol",{attrs:{start:"5"}},[a("li",[s._v("启动和停止")])]),s._v(" "),a("ul",[a("li",[s._v("启动")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#常规启动\n./bin/elasticsearch\n\n#后台启动\n./bin/elasticsearch -d\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ul",[a("li",[s._v("停止")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#根据端口号查询对应Pid\nnetstat -tuln | grep <port>\n\n#杀死进程\nkill -9 es_pid\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ol",{attrs:{start:"6"}},[a("li",[s._v("检查是否启动成功/能否访问")])]),s._v(" "),a("p",[s._v("在浏览器输入"),a("code",[s._v("http://es_node_ip:9200/")]),s._v("检查ES是否启动成功.")]),s._v(" "),a("h3",{attrs:{id:"安装插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装插件"}},[s._v("#")]),s._v(" 安装插件")]),s._v(" "),a("h4",{attrs:{id:"ik-分词器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ik-分词器"}},[s._v("#")]),s._v(" IK 分词器")]),s._v(" "),a("ol",[a("li",[s._v("下载")])]),s._v(" "),a("blockquote",[a("p",[s._v("https://github.com/medcl/elasticsearch-analysis-ik")])]),s._v(" "),a("p",[s._v("找到与ES版本对应的IK，然后下载其中的zip包(非source包)")]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("上传并解压")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 解压到目标文件夹\n# -o 表示unzip执行后覆盖原有的文件\n# -d 表示指定的目标文件夹\nunzip -o es-ik-xxxx.zip -d ./tmp\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("将解压后的ik文件夹放到es/plugins/目录中")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mv ./tmp/ik/ /usr/local/es/plugins/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[a("p",[s._v("重启ES")])]),s._v(" "),a("li",[a("p",[s._v("测试ik是否成功")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('# ik_smart ：最少切分算法\n# ik_max_word ：最细粒度划分\nGET _analyze\n{\n  "analyzer": "ik_smart",\n  "text": """为啥他们总是会说一些"何不食肉糜乎"的说法？"""\n}\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"遇到的问题-解决办法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#遇到的问题-解决办法"}},[s._v("#")]),s._v(" 遇到的问题&&解决办法")]),s._v(" "),a("blockquote",[a("p",[s._v("error: max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144].\n问题原因：因为系统限制了每个进程能映射的虚拟内存区域数量的最大值，而 Elasticsearch 需要超过此限制")])]),s._v(" "),a("ul",[a("li",[s._v("临时更改")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo sysctl -w vm.max_map_count=262144\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("永久修改\n(1)编辑 /etc/sysctl.conf 文件并将以下行添加到文件底部：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("vm.max_map_count=262144\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("(2)保存并重新加载配置")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo sysctl -p\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"参考链接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考链接"}},[s._v("#")]),s._v(" 参考链接")]),s._v(" "),a("ol",[a("li",[s._v("https://blog.csdn.net/smilehappiness/article/details/118466378")]),s._v(" "),a("li",[s._v("https://blog.csdn.net/wpc2018/article/details/121156880")])]),s._v(" "),a("h2",{attrs:{id:"搭建kibana"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#搭建kibana"}},[s._v("#")]),s._v(" 搭建Kibana")]),s._v(" "),a("ol",[a("li",[s._v("下载")])]),s._v(" "),a("blockquote",[a("p",[s._v("https://www.elastic.co/cn/downloads/kibana")])]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("上传并解压")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("tar -xzvf kibana-xxxx.tar.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("修改配置文件\n(1) 编辑config目录下yml文件")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("vim /home/elk/kibana/config/kibana.yml\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("(2) 修改如下配置")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('# 以下为关键项\n# 默认值: 5601 Kibana 由后端服务器提供服务，该配置指定使用的端口号。 \nserver.port: 5601\n\n# 默认值: "localhost" 指定后端服务器的主机地址。\nserver.host: 127.0.0.1\n\n# 显示中文\ni18n.locale: "zh-CN"\n\n# ES服务ip及端口\nelasticsearch.hosts: ["http://localhost:9200"]\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[a("p",[s._v("创建专用kibana用户,或使用已有非root用户。(参考es相关步骤)")])]),s._v(" "),a("li",[a("p",[s._v("启动和停止")])])]),s._v(" "),a("ul",[a("li",[s._v("启动")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#常规启动\n./bin/kibana\n\n#后台启动\nnohup ./bin/kibana & \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ul",[a("li",[s._v("停止")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#根据端口号查询对应Pid\nnetstat -tuln | grep <port>\n\n#杀死进程\nkill -9 kibana_pid\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ol",{attrs:{start:"6"}},[a("li",[s._v("外部访问")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("防火墙开放对应端口")])]),s._v(" "),a("li",[a("p",[s._v("浏览器访问")])])]),s._v(" "),a("p",[s._v("http://kibana_ip:port/")]),s._v(" "),a("h3",{attrs:{id:"参考链接-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考链接-2"}},[s._v("#")]),s._v(" 参考链接")]),s._v(" "),a("blockquote",[a("p",[s._v("https://developer.aliyun.com/article/789870")])]),s._v(" "),a("h2",{attrs:{id:"搭建logstash"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#搭建logstash"}},[s._v("#")]),s._v(" 搭建Logstash")]),s._v(" "),a("ol",[a("li",[s._v("下载")])]),s._v(" "),a("blockquote",[a("p",[s._v("https://artifacts.elastic.co/downloads/logstash/")])]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("上传并解压")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("tar -xzvf logstash-xxx.tar.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[a("p",[s._v("创建专属用户或使用非root用户(参考es搭建步骤)")])]),s._v(" "),a("li",[a("p",[s._v("修改配置")])])]),s._v(" "),a("p",[s._v("(1) 修改config目录下yml文件")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("vim ./config/logstash.yml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("(2) 修改以下配置")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 配置指向logstash的数据采集配置文件\n# 配置后运行logstash 时可不用指定conf文件\npath.config: config/conf.d/*.conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ol",{attrs:{start:"5"}},[a("li",[s._v("logstash数据源采集配置文件示例")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('input {\n  file {\n    path => "/usr/local/nginx/logs/access.log"\n    type => "nginx"\n  }\n}\n\noutput {\n  elasticsearch {\n    hosts => ["http://192.168.0.200:9200"]\n    index => "test-nginx-logs-%{+YYYY.MM.dd}"\n  }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("ol",{attrs:{start:"6"}},[a("li",[s._v("配置完成后启动logstash")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('# 指定数据源配置文件\n./logstash -f  input_out.conf\n\n# 如果已经在步骤4配置了"path.config"，可执行\n\n./logstash \n\n## 后台启动\n./logstash > ./logs/xxx.log &\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("ol",{attrs:{start:"7"}},[a("li",[s._v("停止")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#根据端口号查询对应Pid\nnetstat -tuln | grep <port>\n\n#杀死进程\nkill -9 es_pid\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h3",{attrs:{id:"参考链接-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考链接-3"}},[s._v("#")]),s._v(" 参考链接")]),s._v(" "),a("blockquote",[a("p",[s._v("https://www.jianshu.com/p/61d40f772c4a")]),s._v(" "),a("p",[s._v("https://blog.csdn.net/shy871/article/details/118309754")])])])}),[],!1,null,null,null);a.default=e.exports}}]);