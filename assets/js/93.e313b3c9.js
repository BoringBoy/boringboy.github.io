(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{429:function(a,s,t){"use strict";t.r(s);var n=t(7),e=Object(n.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"ubuntu-debian包管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu-debian包管理"}},[a._v("#")]),a._v(" ubuntu/debian包管理")]),a._v(" "),s("p",[a._v("本篇文章整理记录了ubuntu/debian系统中包管理的相关概念和常用命令，并给出离线安装包时缺少依赖的几种解决办法。")]),a._v(" "),s("h3",{attrs:{id:"ubuntu-debian"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu-debian"}},[a._v("#")]),a._v(" ubuntu/debian")]),a._v(" "),s("h2",{attrs:{id:"基本知识"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基本知识"}},[a._v("#")]),a._v(" 基本知识")]),a._v(" "),s("h3",{attrs:{id:"_1-apt-与apt-get-区别-该如何选择"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-apt-与apt-get-区别-该如何选择"}},[a._v("#")]),a._v(" 1. "),s("code",[a._v("apt")]),a._v(" 与"),s("code",[a._v("apt-get")]),a._v(" 区别？ 该如何选择？")]),a._v(" "),s("p",[s("code",[a._v("apt")]),a._v(" 和 "),s("code",[a._v("apt-get")]),a._v(" 都是 Ubuntu 系统中常见的包管理工具，用于软件的安装、更新和卸载。")]),a._v(" "),s("p",[a._v("(1)"),s("strong",[a._v("区别")]),a._v("：")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("命令行参数不完全相同：")]),a._v(" "),s("p",[a._v("apt 命令行参数与 apt-get 不完全相同。例如，apt 中没有 apt-get 命令的 -y 选项，而是使用 --yes。")])]),a._v(" "),s("li",[s("p",[a._v("进度条显示方式不同：")]),a._v(" "),s("p",[a._v("apt 命令默认会显示进度条，而 apt-get 命令默认不会显示进度条。如果想要在 apt-get 命令中显示进度条，可以使用 -y 或 -q 等选项。")])]),a._v(" "),s("li",[s("p",[a._v("自动清理方式不同：\napt 默认会在安装、升级和清理软件包时自动清理无用依赖，而 apt-get 命令默认不会清理，需要使用单独的命令进行清理。")])])]),a._v(" "),s("p",[a._v("(2)"),s("strong",[a._v("选择根据")]),a._v("：")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("Ubuntu 版本：")]),a._v(" "),s("p",[a._v("如果使用 Ubuntu 16.04 或更新版本，则可以使用 apt 命令。如果是较旧的版本，则应该使用 apt-get 命令。")])])]),a._v(" "),s("h3",{attrs:{id:"_2-相关文件存放路径"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-相关文件存放路径"}},[a._v("#")]),a._v(" 2. 相关文件存放路径")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("软件源地址路径： "),s("code",[a._v("/etc/apt/source.list")])])]),a._v(" "),s("li",[s("p",[a._v("软件包存放地址： "),s("code",[a._v("/var/cache/apt/archives")])])])]),a._v(" "),s("h2",{attrs:{id:"常用命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常用命令"}},[a._v("#")]),a._v(" 常用命令")]),a._v(" "),s("h3",{attrs:{id:"apt-命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#apt-命令"}},[a._v("#")]),a._v(" apt 命令")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#apt [选项] 命令")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#更新可用软件包列表")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" update  \n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#通过 安装/升级 软件来更新系统")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" upgrade\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#查找包")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" search "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("package"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#安装包")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("package"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#重新安装包")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" reinstall "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("package"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#移除包")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" remove "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("package"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#显示已安装的软件包")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" list "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--installed")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#显示软件包具体信息例如：版本号，安装大小，依赖关系，bug报告等等")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" show "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("package"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br")])]),s("h3",{attrs:{id:"apt-cache命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#apt-cache命令"}},[a._v("#")]),a._v(" apt-cache命令")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#获取依赖包信息")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-cache")]),a._v(" depends "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("package"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#查看该包被哪些包依赖")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-cache")]),a._v(" rdepends "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("package"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#搜索本地缓存的包")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-cache")]),a._v(" search package_name\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#只在软件包名称中查找搜索词")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-cache")]),a._v(" search --names-only package_name\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#软件包的详细元数据信息")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-cache")]),a._v(" show package_name\n\n\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br")])]),s("ul",[s("li",[a._v("apt的策略")])]),a._v(" "),s("p",[a._v("默认情况下，每个已安装的软件包版本的优先级为 100，未安装的软件包的优先级为 500。同一软件包可能有多个不同优先级的版本。APT 会安装优先级较高的版本，除非安装的版本较新。")]),a._v(" "),s("h2",{attrs:{id:"解决离线安装缺少依赖的问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解决离线安装缺少依赖的问题"}},[a._v("#")]),a._v(" 解决离线安装缺少依赖的问题")]),a._v(" "),s("h3",{attrs:{id:"方法1-使用-aptitude-工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#方法1-使用-aptitude-工具"}},[a._v("#")]),a._v(" 方法1：使用 aptitude 工具")]),a._v(" "),s("blockquote",[s("p",[a._v("下载后默认存放位置在/var/cache/apt/archives")])]),a._v(" "),s("ol",[s("li",[a._v("安装工具")])]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("aptitude")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ol",{attrs:{start:"2"}},[s("li",[a._v("下载指定软件包")])]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 执行下面命令")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("aptitude")]),a._v(" --download-only "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("package-name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 示例")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("aptitude")]),a._v(" --download-only "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" vsftpd\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("h3",{attrs:{id:"方法2-使用apt-get命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#方法2-使用apt-get命令"}},[a._v("#")]),a._v(" 方法2：使用"),s("code",[a._v("apt-get")]),a._v("命令")]),a._v(" "),s("ol",[s("li",[a._v("输入下面的命令")])]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-get")]),a._v(" –d "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("package"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("blockquote",[s("p",[s("strong",[a._v("说明:")]),a._v(" 此方法仅用于当前系统中没有该包及其依赖时才有效，如果通过安装其他包时已经安装了某个依赖，这个方法就不会下载那个依赖项。（因此该方法大概率会漏项，即便是在新的系统上操作也是极大可能漏项的，因为操作系统安装过程中已经安装了一些包）")])]),a._v(" "),s("h3",{attrs:{id:"方法3-apt-get-install"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#方法3-apt-get-install"}},[a._v("#")]),a._v(" 方法3："),s("code",[a._v("apt-get install")])]),a._v(" "),s("ul",[s("li",[a._v("depends方式找出依赖项交由管道处理后传递给"),s("code",[a._v("apt-get install")]),a._v("命令")])]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#有些包名中有<>符号，用tr将其删除")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-get")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--reinstall")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-cache")]),a._v(" depends "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("packname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" depends "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cut")]),a._v(" -d: f2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tr")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"<>"')]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v("\n\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("h3",{attrs:{id:"完成下载后的安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#完成下载后的安装"}},[a._v("#")]),a._v(" 完成下载后的安装")]),a._v(" "),s("p",[a._v("在软件包目录下，执行下面的命令")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" dpkg "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" *.deb\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);