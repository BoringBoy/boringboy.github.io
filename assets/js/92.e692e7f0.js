(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{427:function(s,a,n){"use strict";n.r(a);var e=n(7),t=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"centos-redhat包管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#centos-redhat包管理"}},[s._v("#")]),s._v(" centos/redhat包管理")]),s._v(" "),a("p",[s._v("本篇文章整理记录了centos/redhat系统中包管理的相关概念和常用命令，并给出离线安装包时缺少依赖的几种解决办法。")]),s._v(" "),a("h2",{attrs:{id:"基本知识"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本知识"}},[s._v("#")]),s._v(" 基本知识")]),s._v(" "),a("h3",{attrs:{id:"_1-yum-与-rpm-区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-yum-与-rpm-区别"}},[s._v("#")]),s._v(" 1. yum 与 rpm 区别？")]),s._v(" "),a("blockquote",[a("p",[s._v("yum基于RPM包管理，能够从指定的服务器自动下载RPM包并且安装，可以自动处理依赖性关系，并且一次安装所有依赖的软件包，无须繁琐地一次次下载、安装。")])]),s._v(" "),a("h3",{attrs:{id:"_2-repo-文件是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-repo-文件是什么"}},[s._v("#")]),s._v(' 2.".repo"文件是什么？')]),s._v(" "),a("ul",[a("li",[a("code",[s._v(".repo")]),s._v("文件是什么")])]),s._v(" "),a("blockquote",[a("p",[s._v("repo文件是Fedora中yum源（软件仓库）的配置文件，通常一个repo文件定义了一个或者多个软件仓库的细节内容，例如我们将从哪里下载需要安装或者升级的软件包，repo文件中的设置内容将被yum读取和应用！")])]),s._v(" "),a("ul",[a("li",[a("code",[s._v(".repo")]),s._v("文件通常所在位置?")])]),s._v(" "),a("blockquote",[a("p",[s._v("/etc/yum.repos.d/")])]),s._v(" "),a("h2",{attrs:{id:"常用命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用命令"}},[s._v("#")]),s._v(" 常用命令")]),s._v(" "),a("h3",{attrs:{id:"yum-命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#yum-命令"}},[s._v("#")]),s._v(" yum 命令")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 安装软件包\nsudo yum install [package]\n\n# 删除软件包及其依赖\nsudo yum remove [package]\n\n# 升级软件包\nsudo yum update [package]\n\n# 查看软件包信息\nsudo yum info [package]\n\n# 清理本地缓存\nsudo yum clean all \n# 清理插件缓存\nsudo yum clean plugins\n\n# 构建缓存\nsudo yum makecache\n\n# 查找软件包\nsudo yum search [package]\n\n# 查看包依赖信息\nsudo yum deplist [package]\n\n# 显示可用仓库\nsudo yum repolist enabled\n\n# 显示已安装包\nyum list installed\n\n# 显示可更新包\nyum list updates\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br")])]),a("h3",{attrs:{id:"rpm-命令-全称-redhat-package-manager"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rpm-命令-全称-redhat-package-manager"}},[s._v("#")]),s._v(" rpm 命令(全称：RedHat Package Manager)")]),s._v(" "),a("ul",[a("li",[s._v("安装rpm 包")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# -i:安装，-v:显示详细信息,-h:显示安装进度\nrpm -ivh [package]\n\n# 忽略报错强制安装\nrpm --force -ivh [package]\n\n# 不检测依赖安装\nrpm --nodeps -ivh [package]\n\n# -U（大写）选项的含义是：如果该软件没安装过则直接安装；若没安装则升级至最新版本。\nrpm -Uvh [pacakge]\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("ul",[a("li",[s._v("卸载rpm包")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 卸载包\nrpm -e [package]\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[s._v("查询包")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#列出所有安装过的包\nrpm -qa\n\n#获得某个软件包的文件全名\nrpm -q [pack_short]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"解决离线安装缺少依赖的问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解决离线安装缺少依赖的问题"}},[s._v("#")]),s._v(" 解决离线安装缺少依赖的问题")]),s._v(" "),a("h3",{attrs:{id:"方法1-使用downloadonly插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方法1-使用downloadonly插件"}},[s._v("#")]),s._v(" 方法1：使用downloadonly插件")]),s._v(" "),a("p",[s._v("说明："),a("strong",[s._v("该种方法仅会将主软件包和基于你现在的操作系统所缺少的依赖关系包一并下载。如果指定的rpm包已经在你的os上安装结束，那么下面命令就得不到想要的结果")])]),s._v(" "),a("ol",[a("li",[s._v("安装插件")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" yum-plugin-downloadonly\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("安装好之后执行下载命令")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行下面命令")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--downloadonly")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package-name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 也可通过 -–downloaddir 指定下载目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--downloadonly")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--downloaddir")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/temp/ "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package-name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h3",{attrs:{id:"方法2-使用yumdownloader软件包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方法2-使用yumdownloader软件包"}},[s._v("#")]),s._v(" 方法2：使用Yumdownloader软件包")]),s._v(" "),a("ol",[a("li",[s._v("安装Yumdownloader工具")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" yum-utils\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("开始下载软件包")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# -–destdir：指定 rpm 包下载目录（不指定时，默认为当前目录）\n# –-resolve：下载依赖的 rpm 包。\n#使用 --destdir 参数，将软件下载到一个特定的目录下\n#示例：\nsudo yumdownloader --resolve --destdir=/root/mypackages/ vsftpd\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"方法3-使用repotrack-推荐"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方法3-使用repotrack-推荐"}},[s._v("#")]),s._v(" 方法3：使用repotrack（推荐）")]),s._v(" "),a("ol",[a("li",[s._v("首先安装repotrack工具")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo yum install yum-utils\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("开始下载rpm包")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#下载rpm包(默认当前目录)\n# 示例：repotrack vsftpd\nrepotrack [package_name]\n\n#下载rpm包(指定下载目录，使用-p)\n#示例--下载离线包至当前目录下的temp文件夹:\n\nrepotrack -p ./temp [package_name]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"下载之后的安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#下载之后的安装"}},[s._v("#")]),s._v(" 下载之后的安装")]),s._v(" "),a("ul",[a("li",[s._v("安装离线包")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 切换到rpm 所在目录，执行下面的命令\nrpm -ivh *.rpm\n\n# 或使用下面的命令\nrpm -Uvh --force --nodeps *.rpm\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);