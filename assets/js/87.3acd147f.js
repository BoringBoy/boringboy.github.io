(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{422:function(s,a,n){"use strict";n.r(a);var e=n(7),l=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"shell编程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shell编程"}},[s._v("#")]),s._v(" Shell编程")]),s._v(" "),a("ul",[a("li",[s._v("关于Shell")])]),s._v(" "),a("blockquote",[a("p",[s._v("Shell 是一种用户与操作系统内核进行交互的命令行解释器（command-line interpreter），也是一种编程语言。")]),s._v(" "),a("p",[s._v("用户可以通过 Shell 运行系统命令、执行脚本、管理文件和目录、进行文件操作、编写简单的自动化任务等。")])]),s._v(" "),a("h3",{attrs:{id:"shell-基础"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shell-基础"}},[s._v("#")]),s._v(" shell 基础")]),s._v(" "),a("ol",[a("li",[a("p",[s._v(".sh 文件第一行需要声明所用 shell ，通常为："),a("code",[s._v("#!/bin/bash")])])]),s._v(" "),a("li",[a("p",[s._v("多个命令可用分号间隔并执行，如："),a("code",[s._v("A ; B ；C")]),s._v("。")])]),s._v(" "),a("li",[a("p",[s._v("执行.sh文件要给予其 x 权限，即："),a("code",[s._v("u + x")])])]),s._v(" "),a("li",[a("p",[s._v("取变量值方法为在变量前增加美元符号，例：$HOME,当存在冲突时，要加转义字符 "),a("code",[s._v('"\\"')])])]),s._v(" "),a("li",[a("p",[s._v("将命令赋值给变量的方法：")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("(1) 使用反引号字符（``）;")])]),s._v(" "),a("li",[a("p",[s._v("(2) 使用$()")])])])]),s._v(" "),a("li",[a("p",[s._v("输入重定向，即将文件内容输出到命令中，基本语法为 "),a("code",[s._v("command < inputfile")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("(1)有两种输入重定向方式，分别为 < 和 << .\n 示例：对a.txt 文件中的文本进行排序\n sort < a.txt\n\n(2)内联输入重定向，语法为command << mark ,mark为指定的标记符，用来标记输入数据的开始和结束.\n示例：\n`wc << EOF\n>string1\n>string2\n>string3\n>EOF\n`\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("输出重定向，即将命令结果输出到文件中，基本语法为 "),a("code",[s._v("command > outputfile")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("（1）有两种重定向方式，分别为 > 和 >> .\n（2）两种方式的区别：> 是写入到文件，故而会清空原文件内容，>> 则是追加到文件末尾.\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("管道命令，用 | 符号将前一个命令的输出作为后一个命令的输入，基本语法为 "),a("code",[s._v("command1 | command2")])])]),s._v(" "),a("li",[a("p",[s._v("数学表达式操作,基本语法为："),a("code",[s._v("$[operation]")]),s._v("，即用中括号 括住数学表达式,示例：\n"),a("code",[s._v("var1=$[3 * 9]")])])]),s._v(" "),a("li",[a("p",[s._v("查看命令退出码 "),a("code",[s._v("$?")]),s._v("，用以判断命令是否正常结束。通常，退出码为0时表示命令成功结束，否则为命令执行出错异常退出;退出状态码区间 0~255。")])]),s._v(" "),a("li",[a("p",[s._v("可用 "),a("strong",[s._v("exit")]),s._v(" 指定退出码，例："),a("code",[s._v("exit 30")])])]),s._v(" "),a("li",[a("p",[s._v("if-then 语法结构")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("if command\nthen\n    commands\nfi\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("或")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("if command ; then\ncommands\nfi\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("if-then-else语法结构")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("if command \nthen \n    commands\nelse\n    commands\nfi\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("test 命令语法结构： "),a("code",[s._v("test conditions")]),s._v("  ，其主要用途为：")]),s._v(" "),a("ul",[a("li",[s._v("数值比较")]),s._v(" "),a("li",[s._v("字符串比较")]),s._v(" "),a("li",[s._v("文件比较")])]),s._v(" "),a("p",[s._v("也可用另一种表达方式：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("if [condition]\nthen\n    commands\nfi\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("多条件判断语法")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("[condition1] && [condition2]")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("[condition1] || [condition2]")])])])])]),s._v(" "),a("li",[a("p",[s._v("if-then 高级特性"),a("br"),s._v("\n（1）使用双括号运算数学表达式，基本语法为"),a("code",[s._v("((expression))")]),s._v("。示例：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("if (( $val ** 2 > 90))\nthen\n    ((val2 = $val * 10))\nfi\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("（2）使用双方括号进行模式匹配，基本语法为"),a("code",[s._v("[[expression]]")]),s._v("。示例：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("if [[ $USER == r* ]]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("for 循环的基本语法：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("for i in list\ndo\n    commands\ndone\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("字段分隔符"),a("code",[s._v("IFS")]),s._v(" 用以分割长字符串")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#默认分隔符为空格\n#当需要调整分隔符为回车或其他字符时，使用下面的代码改变IFS的值\nIFS=$'\\n'\n\n#可指定多个分隔符,将字符拼接起来即可，如：\nIFS=$'\\n':;\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("for 循环搭配通配符 ,示例：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("for f in /home/test/*\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("C语言风格for循环，示例：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("for ((i=1;i<10;i++))\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("while 循环语法：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("while test command\ndo\n    commands\ndone\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("until 语法：")])]),s._v(" "),a("li",[a("p",[s._v("case 语法：")])]),s._v(" "),a("li",[a("p",[s._v("break、continue使用 与其它语言相似，break可指定跳出层数。")])]),s._v(" "),a("li",[a("p",[s._v("循环输出处理方式")])])]),s._v(" "),a("ul",[a("li",[s._v("重定向方式，示例:"),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('for ((a=1;a<10;a++))\ndo\n    echo "a is $a"\ndone > demo.txt\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])]),s._v(" "),a("li",[s._v("管线方式，示例："),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("for(....)\ndo\n    .....\ndone | sort\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])])]),s._v(" "),a("ol",{attrs:{start:"23"}},[a("li",[a("p",[s._v("命令行参数说明")]),s._v(" "),a("ul",[a("li",[a("p",[a("strong",[s._v("$0")]),s._v(" : 程序名")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("$1-9")]),s._v(" : 参数1-参数9")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("${10-...}")]),s._v(" :超过9个参数的参数表示")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("$#")]),s._v(" : 表示参数个数")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("$*")]),s._v(" : 表示所有参数构成的单个字符串")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("$@")]),s._v(" : 表示所有参数构成的同一字符串的多个独立的单词")])])])]),s._v(" "),a("li",[a("p",[s._v("读取用户输入")]),s._v(" "),a("p",[s._v("(1)read 命令")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("read 提示"),a("br"),s._v(" "),a("code",[s._v('read -p "...." name')])])]),s._v(" "),a("li",[a("p",[s._v("read 超时 : -t后为设定的秒数"),a("br"),s._v(" "),a("code",[s._v('read -t 10 -p "" name')])])]),s._v(" "),a("li",[a("p",[s._v("read 隐藏输入\n"),a("code",[s._v('read -s -p "" password')])])]),s._v(" "),a("li",[a("p",[s._v("read 读取文件")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cat file1 | while read line\ndo\n    .....\ndone\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("捕捉信号")])]),s._v(" "),a("li",[a("p",[s._v("后台运行脚本，在后面加 "),a("strong",[s._v("&")]),s._v(" 符号")])]),s._v(" "),a("li",[a("p",[s._v("定期执行命令：\n"),a("code",[s._v("crontab")])])]),s._v(" "),a("li",[a("p",[s._v("函数编程")])])]),s._v(" "),a("p",[s._v("(1)基本函数语法")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("function a{\n    commands\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("或")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("a(){\n    commands\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("(2)使用return 返回值")]),s._v(" "),a("p",[s._v("(3)使用echo 输出值")]),s._v(" "),a("p",[s._v("(4)局部变量和全局变量")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("局部变量定义需在变量前使用 "),a("code",[s._v("local")])])]),s._v(" "),a("li",[a("p",[s._v("全局变量的定义可以使用"),a("code",[s._v("global")])])])]),s._v(" "),a("p",[s._v("(5)变量的传递及处理")]),s._v(" "),a("p",[s._v("(6)库文件创建/引入："),a("code",[s._v("source 或 .")])]),s._v(" "),a("h3",{attrs:{id:"变量操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#变量操作"}},[s._v("#")]),s._v(" ${} 变量操作")]),s._v(" "),a("ol",[a("li",[s._v("取变量值"),a("br"),s._v("\n说明：取得对应变量的值，等同$var")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#示例\na=hello\necho ${a}\n\n#输出：hello\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("取变量长度")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#示例\na=hello\necho ${#a}\n\n#输出：5\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("进行变量替换：${var/word1/word2}\n说明：将变量中的指定字符替换成目标字符")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('#示例\na="My name is Bob"\necho ${a/My/Your}\n\n#输出:  Your name is Bob\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])])])}),[],!1,null,null,null);a.default=l.exports}}]);