(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{398:function(s,e,n){"use strict";n.r(e);var a=n(7),t=Object(a.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"存储过程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#存储过程"}},[s._v("#")]),s._v(" 存储过程")]),s._v(" "),e("h3",{attrs:{id:"概念-作用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#概念-作用"}},[s._v("#")]),s._v(" 概念&&作用")]),s._v(" "),e("blockquote",[e("p",[s._v("存储过程（Stored Procedure）是在大型数据库系统中，一组为了完成特定功能的SQL 语句集，存储在数据库中，经过第一次编译后调用不需要再次编译，用户通过指定存储过程的名字并给出参数（如果该存储过程带有参数）来执行它。存储过程是数据库中的一个重要对象。")])]),s._v(" "),e("h3",{attrs:{id:"特点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#特点"}},[s._v("#")]),s._v(" 特点")]),s._v(" "),e("p",[s._v("存储过程具备以下特点：")]),s._v(" "),e("ul",[e("li",[s._v("能完成较复杂的判断和运算")]),s._v(" "),e("li",[s._v("可编程行强，灵活")]),s._v(" "),e("li",[s._v("SQL编程的代码可重复使用")]),s._v(" "),e("li",[s._v("执行的速度相对快一些")]),s._v(" "),e("li",[s._v("减少网络之间的数据传输，节省开销")])]),s._v(" "),e("h3",{attrs:{id:"基本使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#基本使用"}},[s._v("#")]),s._v(" 基本使用")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("创建存储过程")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(" create procedure 名称 as\n begin\n ........\n end; \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("控制台打印")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("dbms_output.put_line('helloworld');\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("调用存储过程")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# 以下 xxx 即存储过程名称\ncall xxxx()\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])])])]),s._v(" "),e("h3",{attrs:{id:"变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#变量"}},[s._v("#")]),s._v(" 变量")]),s._v(" "),e("h4",{attrs:{id:"变量分类"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#变量分类"}},[s._v("#")]),s._v(" 变量分类")]),s._v(" "),e("p",[s._v("1、普通数据类型（char,varchar2,date,number,boolean,long)"),e("br"),s._v("\n2、特殊变量类型（引用型变量，记录型变量）"),e("br"),s._v("\n引用型变量，变量的数据类型取决表中的数据类型；记录型变量，变量不是接受一个值，是一行值。")]),s._v(" "),e("p",[s._v("声明变量语法:变量名 变量类型（变量长度）")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("    ---普通变量         v_name     varcar2(20);\n    ---引用型变量       v_income   emp_test.income%TYPE;\n    ---记录型变量       v_emp      emp_test%ROWTYPE  //表示变量v_emp存的是表中emp_test一整行的数据\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h4",{attrs:{id:"变量赋值"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#变量赋值"}},[s._v("#")]),s._v(" 变量赋值")]),s._v(" "),e("p",[s._v("变量赋值的方式有两种："),e("br"),s._v("\n1.直接赋值语句 :="),e("br"),s._v("\n2.语句复制，使用select……into……赋值：（语法select值into变量）")]),s._v(" "),e("p",[s._v("(1)普通类型示例1")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(" create or replace procedure select_emp as\n --定义变量my_income\n my_income varchar(20);\n --声明变量直接赋值\n my_income2 int  := 3000; \n\n begin\n -- 使用select语句给变量赋值，将emp_test 表中worker_no = '200010'的income赋值给变量my_income\n select  income into my_income from emp_test where worker_no = '200010';\n\n select income,department into my_income,my_depart from emp_test where worker_no='200010';\n\n --打印输出变量my_income值\n dbms_output.put_line('工资'||my_income);\n end;\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br")])]),e("p",[s._v("（2）引用型示例")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("--工资,引用型变量\nmy_income emp_test.income%TYPE;\n--部门,引用型变量\nmy_depart emp_test.department%TYPE;\n    \n--赋值\nselect income,department into my_income,my_depart from emp_test where worker_no='200010';\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[s._v("（3）记录型示例")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("--定义记录型变量，打印工号为200010员工的个人信息，包括：工资、部门\ncreate or replace procedure test3 as\n---v_emp记录型变量，接受表中的一整行记录\nv_emp emp_test%ROWTYPE;\nbegin\n  select * into v_emp from emp_test where worker_no='200010';\n  dbms_output.put_line( '工资'||v_emp.income||'部门'||v_emp.department);  \nend ;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("h3",{attrs:{id:"参数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[s._v("#")]),s._v(" 参数")]),s._v(" "),e("ol",[e("li",[s._v("基本语法")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("create procedure 名称(参数名 [IN|OUT|INOUT] 参数数据类型 )\nbegin\n.........\nend;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("ol",{attrs:{start:"2"}},[e("li",[e("p",[s._v("参数说明")]),s._v(" "),e("ul",[e("li",[s._v("IN")])]),s._v(" "),e("p",[s._v("（1）传入参数，类型为in,表示该参数的值必须在调用存储过程时指定，如果不显示指定为in,那么默认就是in类型。"),e("br"),s._v("\n（2）IN类型参数一般只用于传入，在调用过程中一般不作为修改和返回")]),s._v(" "),e("ul",[e("li",[s._v("OUT")]),s._v(" "),e("li",[s._v("INOUT")])])])]),s._v(" "),e("h3",{attrs:{id:"条件语句"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#条件语句"}},[s._v("#")]),s._v(" 条件语句")]),s._v(" "),e("ol",[e("li",[s._v("基本语法\n"),e("ul",[e("li",[s._v("单条件判断")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("if() then...else...end if;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ul",[e("li",[s._v("多条件判断")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("if()   then...\nelsif()   then...\nelse ...\nend if;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])])]),s._v(" "),e("li",[s._v("循环\n"),e("ul",[e("li",[e("p",[s._v("while 循环"),e("br"),s._v("\n（1）基本语法")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("while() loop\n....\n....\nend loop;\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("（2）示例")]),s._v(" "),e("blockquote",[e("p",[s._v("使用循环语句，向表emp_test中插入十条数据，仅给工号字段插入数据，其它字段不插入数据，插入工号为12001、12002、12003、12004、12005至120010")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("create or replace procedure test_inset as\nmy_worker int;\nbegin\nmy_worker :=0;\nwhile my_worker<10 loop\n   my_worker :=my_worker+1;\n   insert into emp_test(worker_no) values('1200'||to_char(my_worker));\n   commit;\nend loop;\nend;\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("for 循环"),e("br"),s._v("\n（1）基本语法")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[s._v("```\nfor （） in （）\nloop\n   ……\nend loop;\n```\n")])])]),e("p",[s._v("（2）示例 :使用FOR循环，打印输出0至5的数字")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[s._v("```\ncreate or replace procedure for_test is\ni number;\nbegin\n   i:=0;\n   for i in 1..5 loop\n      dbms_output.put_line(i);\n   end loop;\nend ;\n```\n")])])])]),s._v(" "),e("li",[e("p",[s._v("loop"),e("br"),s._v("\n（1）基本语法")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[s._v("```\nLOOP\n   Exit When(退出条件);\n   ……\nEND LOOP\n```\n")])])])])])])]),s._v(" "),e("h3",{attrs:{id:"游标"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#游标"}},[s._v("#")]),s._v(" 游标")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("基本概念"),e("br"),s._v("\n用于临时存储一个查询返回的多行数据,通过遍历游标，可以逐行访问处理该结果集的数据\n游标的使用方式：声明——>打开——>读取——>关闭")])]),s._v(" "),e("li",[e("p",[s._v("基本语法")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("//游标声明：\ncursor 游标名[(参数列表)] is 查询语句；\n//游标打开：\nopen 游标名；\n//游标取值：\nfetch 游标名 into 变量列表；\n//游标关闭：\nclose 游标名；\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("ol",{attrs:{start:"3"}},[e("li",[s._v("示例:编写存储过程，使用游标，把emp_test表中20号部门的员工工号逐一打印")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("create or replace procedure cur_test as\nmy_workerno varchar(20);\n---游标声明：\ncursor cur_worker is select  worker_no from emp_test where department='20号部门';\n\nbegin\n--游标打开：\nopen cur_worker;\nLOOP\n  ---获取游标中的数据\n  fetch cur_worker into my_workerno;--提取cursor,提取结果集中的记录\n  \n  --退出循环条件\n  Exit When cur_worker%notfound;\n  dbms_output.put_line('my_workerno:'||my_workerno);\n  \nend loop;\nclose cur_worker;\n\nend;\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br")])])])}),[],!1,null,null,null);e.default=t.exports}}]);